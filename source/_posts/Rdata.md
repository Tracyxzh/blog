---
title: R数据操作
date: 2017-06-25 21:54:59
tags: [R, 数据操作]
---

## 前言
R主要是基于向量处理数据，与使用for循环逐个处理单个数据的方式相比，基于向量的处理速度更快。

## R中常用数据集
```
数据集           |   含义
AirPassenger    |    Box & Jenkins航空公司1949～1960年每月国际航线乘客数 
airquality      |    纽约市1973年5月～9月每日空气质量
cars            |    20世纪20年代汽车速度对刹车距离的影响
mtcars          |    1974年美国Motor Trend杂志上刊登的的32辆车的11个指标数据
Titanic         |    “泰坦尼克”号生还者信息，包含舱室（一等舱、二等舱、三等舱）、性别、年龄、是否生还
InsectSprays    |    使用6中杀虫剂后各自的害虫存活率
Orange          |    橙数的种类、树龄、树围
swiss           |    1888年前后，瑞士联邦47个法语州的生育率鱼社会经济指标
```

<!--more-->

## apply系列函数
```
函数         |  说明
apply()      |  向数组或矩阵应用指定函数，然后将结果以向量、数组或列表形式返回 
lapply()     |  向向量、列表或表达式应用函数，并以列表形式返回
sapply()     |  与lapply()类似，但以向量、矩阵或数组形式返回
tapply()     |  根据指定标准对向量中的数据分组，然后对每个分组应用指定函数，并返回结果
mapply()     |  sapply()扩展版本，借助参数接收多个向量或列表，然后对各个数据的第一个元素应用函数计算结果，然后针对第二个。。。类推，然后返回计算结果
```

### apply()
```
说明：沿着MARGIN方向，向数组或矩阵应用函数FUN，并以向量、数组或列表形式返回结果
apply(
	x,         # 数组或矩阵
	MARGIN，   # 应用函数方向，1是沿着行方向，2是沿着列方向 c(1,2)表示同时沿着行和列方向
	FUN        # 应用函数
		
)
FUN函数返回长度为1的向量时，返回向量；返回大于1的向量时，返回矩阵；返回长度不同向量时，返回列表
```

### lapply()
```
说明：向列表、向量、表达式、数据框等应用指定函数，并将结果以列表形式返回
lapply(
	x,   # 向向量、列表或表达式
	FUN, # 应用函数
	...  # 额外参数，会传给FUN
)
返回于x等长的列表
```

### sapply()
```
说明：与lapply()类似，但以向量、矩阵形式返回
sapply(
	x,   # 向向量、列表或表达式
	FUN, # 应用函数
	...  # 额外参数，会传给FUN
)
FUN函数返回长度为1的向量时，返回向量；返回大于1的向量时，返回矩阵
```

### tapply()
```
说明：根据指定标准对向量中的数据分组，然后对每个分组应用指定函数，并返回结果
tapply(
	x,  # 向量
	INDEX, # 数据分组索引，该参数应该设置为因子，非因子的数据类型会被自动转换为因子
	FUN,  # 要向分组应用的函数
	...   # 额外参数，这些参数被传递给FUN函数
)
```

### mapply()
```
说明：将以列表或向量形式给出的参数传递给指定函数，并返回函数执行结果
mapply(
	FUN, # 等待执行的函数
	...  # 等待传递的参数
)
```

## 随机数生成函数
```
函数                          |  含义 
rnorm(n, mean = 0, sd = 1)   |  生成n个均值为mean、标准差为sd的正态分布的随机数
runinf(n, min = 0, max = 1)  |  生成n个均匀分布的随机数，最小值为min，最大值为max
rpois(n, lambda)             |  生成n个lamada为lambada的泊松分布随机数
rexp(n, rate = 1)            |  生成n个lambda为rate的指数分布随机数
```

## 数据拆分于合并函数
```
函数       |  特征
split()   |  根据给定条件拆分数据
subset()  |  选择满足给定条件的数据
merge()   |  基于共同值的合并数据
```
### split() 
```
说明：根据给定条件拆分数据
split(
	x, # 拆分数据
	f  # 保存拆分的因子
)
返回保存拆分数据的列表
```

### subset()
```
说明：选择满足给定条件的数据
subset(
	x,      # 等待选取局部数据
	subset  # 是否要选取数据
)

subset(
	x,      # 等待选取局部数据
	subset,  # 是否要选取数据
	select   # 数据框时，要选取的列
)
```

### merge
```
说明：根据共同的列名或行名合并数据
merge(
	x,  # 等待合并的数据框
	y   # 等待合并的数据框
)

merge(
	x,  # 等待合并的数据框
	y,  # 等待合并的数据框
	by, # 用于合并基准的列，x,y列名不同时，
	all = FALSE,
	all.x,
	all.y
)
```

## 访问数据框中的列
```
访问数据框中的列，若每次都要使用df$colname的形式，则意味着每次都要反复使用数据框名称df和$符号，这回造成代码冗余。
函数      |  特征
with()    |  允许在代码块内部只使用属性名直接访问数据
within()  |  功能于with()一样，但可以轻松修改数据值 
attach()  |  attach()之后的代码中，可以只使用属性名直接访问数据
detach()  |  作用和attach()相反，detach()之后的代码中，无法继续使用属性名直接访问数据
```
## 参考资料
《R语言与数据分析》